<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>4UTODAY Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>4UTODAY Channel Dashboard</h1>
    <div id="stats"></div>
    <div id="posts"></div>
    
    <script>
        const API_URL = 'https://fourutoday.onrender.com';
        
        async function loadStats() {
            const response = await fetch(`${API_URL}/api/channel/stats`);
            const data = await response.json();
            
            document.getElementById('stats').innerHTML = `
                <h2>Statistics</h2>
                <p>Total Posts: ${data.data.total_posts}</p>
                <p>Latest Post: ${new Date(data.data.latest_post).toLocaleString()}</p>
            `;
        }
        
        async function loadPosts() {
            const response = await fetch(`${API_URL}/api/channel/posts?limit=10`);
            const data = await response.json();
            
            let postsHtml = '<h2>Recent Posts</h2>';
            data.data.posts.forEach(post => {
                postsHtml += `
                    <div style="border:1px solid #ccc; padding:10px; margin:10px;">
                        <strong>ID:</strong> ${post.post_id}<br>
                        <strong>Type:</strong> ${post.message_type}<br>
                        <strong>Date:</strong> ${new Date(post.date).toLocaleString()}<br>
                        <strong>Content:</strong> ${post.content || post.caption || 'No text'}<br>
                    </div>
                `;
            });
            
            document.getElementById('posts').innerHTML = postsHtml;
        }
        
        // Load data on page load
        window.onload = function() {
            loadStats();
            loadPosts();
        };
    </script>
</body>
</html>
